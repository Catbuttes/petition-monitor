(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{43:function(t,e,n){t.exports=n(54)},48:function(t,e,n){},49:function(t,e,n){},54:function(t,e,n){"use strict";n.r(e);var i=n(0),o=n.n(i),a=n(22),r=n.n(a),s=(n(48),n(13)),c=n(14),u=n(17),l=n(15),d=n(16),h=n(8),p=(n(49),n(78)),b=n(75),f=n(77),g=n(35),m=function(t){function e(t){var n;return Object(s.a)(this,e),(n=Object(u.a)(this,Object(l.a)(e).call(this,t)))._getErrorMessage=n._getErrorMessage.bind(Object(h.a)(Object(h.a)(n))),n._petitionIdChanged=n._petitionIdChanged.bind(Object(h.a)(Object(h.a)(n))),n._submitClicked=n._submitClicked.bind(Object(h.a)(Object(h.a)(n))),n.state={PetitionID:n.props.defaultPetition,ButtonDisabled:!1},n}return Object(d.a)(e,t),Object(c.a)(e,[{key:"render",value:function(){return i.createElement(f.a,{className:"PetitionSelectorInput"},i.createElement(f.a.Item,{align:"center"},i.createElement(p.a,{label:"Enter the petition ID",name:"petitionID",autoComplete:"on",onGetErrorMessage:this._getErrorMessage,validateOnLoad:!0,onChange:this._petitionIdChanged,defaultValue:this.props.defaultPetition.toString()})),i.createElement(f.a.Item,{align:"center"},i.createElement(b.a,{text:"Get Signature Count",disabled:this.state.ButtonDisabled,onClick:this._submitClicked})))}},{key:"_submitClicked",value:function(){this.props.submitPetitionID(this.state.PetitionID)}},{key:"_petitionIdChanged",value:function(t,e){Object(g.isUndefined)(e)?this.setState({PetitionID:""}):this.setState({PetitionID:e.toString()})}},{key:"_getErrorMessage",value:function(t){if(""===t)return this.setState({ButtonDisabled:!0}),"";var e=Number(t);return isNaN(e)?(this.setState({ButtonDisabled:!0}),"Petition IDs Should be numeric"):(this.setState({ButtonDisabled:!1}),"")}}]),e}(i.Component),v=function(t){function e(t){var n;return Object(s.a)(this,e),(n=Object(u.a)(this,Object(l.a)(e).call(this,t))).state={PetitionTitle:"",PetitionSignatureCount:""},n}return Object(d.a)(e,t),Object(c.a)(e,[{key:"componentDidMount",value:function(){this.GetData(this.props.PetitionID)}},{key:"render",value:function(){var t="https://petition.parliament.uk/petitions/"+this.props.PetitionID;return i.createElement("div",null,i.createElement("h2",null,this.state.PetitionTitle),i.createElement("h3",null,this.state.PetitionSignatureCount," signatures"),i.createElement("a",{href:t},"Link to petition"))}},{key:"GetData",value:function(t){var e=this;fetch("https://petition.parliament.uk/petitions/"+t+".json").then(function(t){return t.json()}).then(function(t){var n=Number(t.data.attributes.signature_count).toLocaleString();e.setState({PetitionTitle:t.data.attributes.action,PetitionSignatureCount:n})}).catch(function(t){""==e.state.PetitionSignatureCount&&e.setState({PetitionTitle:"Unable to get petition details",PetitionSignatureCount:"Unknown"})}),setTimeout(function(){return e.GetData(t)},5e3)}}]),e}(i.Component),P=function(t){function e(t){var n;return Object(s.a)(this,e),(n=Object(u.a)(this,Object(l.a)(e).call(this,t))).petitionIdSubmitted=n.petitionIdSubmitted.bind(Object(h.a)(Object(h.a)(n))),n.state={PetitionID:"",DisplayCount:!1},n}return Object(d.a)(e,t),Object(c.a)(e,[{key:"render",value:function(){window.location.search;var t=this.props.defaultPetition||"241584";return o.a.createElement("div",{className:"App"},this.state.DisplayCount?void 0:o.a.createElement(m,{submitPetitionID:this.petitionIdSubmitted,defaultPetition:t}),this.state.DisplayCount?o.a.createElement(v,{PetitionID:this.state.PetitionID}):void 0)}},{key:"petitionIdSubmitted",value:function(t){this.setState({PetitionID:t,DisplayCount:!0})}}]),e}(o.a.Component),w=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function j(t,e){navigator.serviceWorker.register(t).then(function(t){t.onupdatefound=function(){var n=t.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),e&&e.onUpdate&&e.onUpdate(t)):(console.log("Content is cached for offline use."),e&&e.onSuccess&&e.onSuccess(t)))})}}).catch(function(t){console.error("Error during service worker registration:",t)})}for(var k=document.getElementsByClassName("PetitionMonitorApp"),C=0;C<k.length;C++){var D=k[C],I=D.getAttribute("defaultPetition");r.a.render(o.a.createElement(P,{defaultPetition:I}),D)}!function(t){if("serviceWorker"in navigator){if(new URL("/petition-monitor",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("/petition-monitor","/service-worker.js");w?(function(t,e){fetch(t).then(function(n){var i=n.headers.get("content-type");404===n.status||null!=i&&-1===i.indexOf("javascript")?navigator.serviceWorker.ready.then(function(t){t.unregister().then(function(){window.location.reload()})}):j(t,e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e,t),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):j(e,t)})}}()}},[[43,1,2]]]);
//# sourceMappingURL=main.eda1faae.chunk.js.map